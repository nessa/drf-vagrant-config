---
- name: update and upgrading packages
  sudo: yes
  apt: update_cache=yes upgrade=safe
- name: install software-properties-common
  sudo: yes
  apt: pkg=software-properties-common state=latest
  apt: pkg=python-setuptools state=latest
  apt: pkg=python-dev state=latest
- name: install pip3
  sudo: yes
  apt: pkg=python3-pip state=latest
  apt: pkg=python3-setuptools state=latest
- name: install pip again with easyintall
  sudo: yes
  command: python3 -m easy_install pip
- name: install dependencies for psycopg2
  sudo: yes
  shell: "apt-get -y build-dep python-psycopg2"
- name: install git
  sudo: yes
  apt: pkg=git state=latest
- name: clone rep from GitHub
  git: accept_hostkey=true repo="{{ project_git_url }}" dest="~/{{ intern_repo_path }}"
- name: ensure supervisor is up to date
  sudo: yes
  apt: pkg=supervisor state=latest
- name: ensure "project" stop
  sudo: yes
  supervisorctl: name={{ name_project }} state=stopped